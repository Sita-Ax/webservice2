(this.webpackJsonpuserfront=this.webpackJsonpuserfront||[]).push([[0],{16:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(11),s=n.n(a),o=(n(16),n(10)),i=n(2),u=n(0),j=function(e){e.loggedIn;return Object(u.jsx)("div",{className:"Navbar",children:Object(u.jsx)("h1",{className:"Navbar-title",children:"Product shop"})})},p=n(6),d=n(5),l=n(3),b=n.n(l),h=n(4),f="http://localhost:8080/user",O={registerUser:function(){var e=Object(h.a)(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(f+"/register",{method:"PUT",responseType:"text",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t.username,password:t.password})});case 3:return n=e.sent,e.next=6,n.text();case 6:return r=e.sent,e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),loginUser:function(){var e=Object(h.a)(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(f+"/login",{method:"POST",responseType:"text",headers:{"Content-Type":"application/json",username:t.name,password:t.password}});case 3:return n=e.sent,e.next=6,n.text();case 6:return r=e.sent,e.abrupt("return",""===r?"error":r);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return","error");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},m="Invalid information, check your input!",x=function(e){var t=e.setLoggedIn,n=e.setToken,c=Object(r.useState)({name:"",password:""}),a=Object(i.a)(c,2),s=a[0],o=a[1],j=Object(r.useState)(!1),l=Object(i.a)(j,2),f=l[0],x=l[1],v=Object(r.useState)(m),g=Object(i.a)(v,2),y=g[0],w=g[1];Object(r.useEffect)((function(){var e=setTimeout((function(){return x(!1)}),5e3);return function(){return clearTimeout(e)}}),[f]);var N=function(){var e=Object(h.a)(b.a.mark((function e(r){var c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.loginUser(r);case 2:"error"!==(c=e.sent)?(n(c),t()):(w(m),x(!0));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(h.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),s.name&&s.password){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,N(s);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(e){o(Object(d.a)(Object(d.a)({},s),{},Object(p.a)({},e.target.name,e.target.value)))};return Object(u.jsxs)(u.Fragment,{children:[f&&Object(u.jsx)("message",{msg:y}),Object(u.jsx)("div",{className:"container",children:Object(u.jsx)("div",{className:"login",children:Object(u.jsxs)("form",{id:"login",onSubmit:k,children:[Object(u.jsx)("h1",{id:"login-title",children:"Sign in here!"}),Object(u.jsx)("input",{type:"text",className:"input",name:"name",value:s.name||"",placeholder:"User Name",onChange:S,required:!0}),Object(u.jsx)("input",{type:"password",className:"input",name:"password",value:s.password||"",placeholder:"Password",onChange:S,required:!0,autoComplete:"off"}),Object(u.jsx)("button",{type:"submit",id:"login-button",children:"Login"})]})})})]})},v={username:"",password:"",repassword:""},g="Invalid information, check your input!",y=function(){var e=Object(r.useState)(v),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!1),s=Object(i.a)(a,2),o=s[0],j=s[1],l=Object(r.useState)(g),f=Object(i.a)(l,2),m=f[0],x=f[1];Object(r.useEffect)((function(){var e=setTimeout((function(){return j(!1)}),5e3);return function(){return clearTimeout(e)}}),[o]);var y=function(){var e=Object(h.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.registerUser(n);case 2:t=e.sent,x(t),j(!0),c(v);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(e){c(Object(d.a)(Object(d.a)({},n),{},Object(p.a)({},e.target.name,e.target.value)))};return Object(u.jsxs)(u.Fragment,{children:[o&&Object(u.jsx)("message",{msg:m}),Object(u.jsx)("div",{className:"container",children:Object(u.jsx)("div",{className:"signup",children:Object(u.jsxs)("form",{id:"signup",onSubmit:function(e){e.preventDefault(),n.password===n.repassword?y():(x(g),j(!0))},children:[Object(u.jsx)("h1",{id:"signup-title",children:"Sign up here!"}),Object(u.jsx)("input",{type:"text",className:"input",name:"username",value:n.username||"",placeholder:"User Name",onChange:w,required:!0}),Object(u.jsx)("input",{type:"password",className:"input",name:"password",value:n.password||"",placeholder:"Password",onChange:w,required:!0,autoComplete:"off"}),Object(u.jsx)("input",{type:"password",className:"input",name:"repassword",value:n.repassword||"",placeholder:"Re-enter Password",onChange:w,required:!0,autoComplete:"off"}),Object(u.jsx)("button",{type:"submit",id:"signup-button",children:"Create"})]})})})]})},w="Invalid information, check your input!";var N=function(e){var t=e.product,n=e.token,c=e.favorite,a=e.setFavoriteProducts,s=Object(r.useState)(c),o=Object(i.a)(s,2),j=o[0],p=o[1],d=Object(r.useState)(!1),l=Object(i.a)(d,2),b=l[0],h=l[1],f=Object(r.useState)(w),O=Object(i.a)(f,2),m=O[0],x=O[1];return Object(r.useEffect)((function(){var e=setTimeout((function(){return h(!1)}),5e3);return function(){return clearTimeout(e)}}),[b]),Object(u.jsxs)("div",{className:"product",children:[b&&Object(u.jsx)("div",{className:"product-message",id:"product-message",style:{color:"red"},children:Object(u.jsx)("strong",{children:m})}),Object(u.jsx)("h4",{children:t.name}),Object(u.jsx)("p",{children:t.description}),Object(u.jsx)("p",{children:t.price}),Object(u.jsx)("button",{disabled:j,onClick:function(){fetch("http://localhost:8080/product/add-favorite",{method:"PUT",responseType:"text",headers:{"Content-Type":"text/plain",token:n},body:t.name}).then((function(e){if(!e.ok)throw new Error(w);return e.text()})).then((function(e){p(!0),a(t),x(e),h(!0),console.log(e)})).catch((function(e){console.error("Error:",e)}))},children:Object(u.jsx)("button",{color:j?"secondary":"primary"})})]})},k={name:"",description:"",price:""};var S=function(e){var t=e.token,n=e.resetStates,c=e.addProduct,a=Object(r.useState)(k),s=Object(i.a)(a,2),o=s[0],j=s[1],l=Object(r.useState)(!1),f=Object(i.a)(l,2),O=f[0],m=f[1],x=Object(r.useState)(k),v=Object(i.a)(x,2),g=v[0],y=v[1];Object(r.useEffect)((function(){var e=setTimeout((function(){return m(!1)}),5e3);return function(){return clearTimeout(e)}}),[O]);var w=function(){var e=Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8080/user/logout",{method:"POST",headers:{"Content-Type":"application/json",token:t}});case 2:n();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(e){j(Object(d.a)(Object(d.a)({},o),{},Object(p.a)({},e.target.name,e.target.value)))};return Object(u.jsxs)(u.Fragment,{children:[O&&Object(u.jsx)("message",{msg:g}),Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)("button",{id:"logout-button",variant:"contained",color:"secondary",onClick:function(){return w()},children:"Logout"}),Object(u.jsx)("div",{className:"login",children:Object(u.jsxs)("form",{onSubmit:function(e){var n;(e.preventDefault(),o.name&&o.description&&o.price)&&(n=o,fetch("http://localhost:8080/product/create",{method:"PUT",responseType:"text",headers:{"Content-Type":"application/json",token:t},body:JSON.stringify({name:n.name,description:n.description,price:n.price})}).then((function(e){return e.ok&&(c(o),j(k)),e.text()})).then((function(e){y(e),m(!0)})).catch((function(e){console.error("Error:",e)})))},children:[Object(u.jsx)("h3",{style:{marginLeft:"3em"},children:"Product information:"}),Object(u.jsx)("input",{type:"text",className:"input",name:"name",value:o.name,placeholder:"Product Name",required:!0,onChange:N}),Object(u.jsx)("input",{type:"text",className:"input",name:"description",value:o.description,placeholder:"Description",required:!0,onChange:N}),Object(u.jsx)("input",{type:"text",className:"input",name:"price",pattern:"[0-9]*",value:o.price,placeholder:"Price",required:!0,onChange:N}),Object(u.jsx)("button",{type:"submit",id:"login-button",children:"Create"})]})})]})]})},T=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)([]),s=Object(i.a)(a,2),p=s[0],d=s[1],l=Object(r.useState)(""),b=Object(i.a)(l,2),h=b[0],f=b[1],O=Object(r.useState)(!1),m=Object(i.a)(O,2),v=m[0],g=m[1],w=function(){g(!1),f("")},k=function(e){f(e)},T=function(e){d([].concat(Object(o.a)(p),[e]))},C=function(e){c([].concat(Object(o.a)(n),[e]))},P=function(){g(!0)},E=Object(r.useCallback)((function(e){fetch("http://localhost:8080"+e,{method:"GET",headers:{"Content-Type":"application/json",token:h}}).then((function(e){return e.json()})).then((function(t){"/product/all"===e?c(t):d(t)})).catch((function(e){console.error("Error:",e)}))}),[h]);Object(r.useEffect)((function(){v&&(E("/product/all"),E("/product/favorites"))}),[v,E]);var U=function(){return Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)("h1",{children:"All Products In Stock"}),n.map((function(e,t){return Object(u.jsx)(N,{product:e,token:h,favorite:p.some((function(t){return t.name===e.name})),setFavoriteProducts:T},t)}))]})},q=function(){return Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)("h1",{children:"My Favorite Products"}),p.map((function(e,t){return Object(u.jsx)(N,{product:e,token:h,favorite:!0,setFavoriteProducts:T},t)}))]})},F=function(){return Object(u.jsx)("h1",{style:{width:"100%",textAlign:"center",marginTop:"10px"},children:"Nothing to show here! \u0295 \u2022\u1d25\u2022\u0294"})};return Object(u.jsxs)("div",{className:"app",children:[Object(u.jsx)(j,{}),v?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(S,{token:h,resetStates:w,addProduct:C}),Object(u.jsxs)("div",{children:[Object(u.jsx)(U,{}),0===n.length&&Object(u.jsx)(F,{})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)(q,{}),0===p.length&&Object(u.jsx)(F,{})]})]}):Object(u.jsxs)("div",{className:"user-form",children:[Object(u.jsx)(x,{setLoggedIn:P,setToken:k}),Object(u.jsx)(y,{})]})]})};s.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(T,{})}),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.54568891.chunk.js.map